{% extends 'blog/base.html' %}

{% block title %}
	{{post.title}}	
{% endblock %}

{% block content %}

curent user: {{user.id}}

<h1>{{post.title}} <small>by {{post.author}}</small> <span style="font-size: 10px" class="text-muted">{{post.date_published|date:"F j, Y"}}</span></h1>
<p>{{post.content}}</p>

{% if user.is_authenticated and user.id == post.author.id%}
<a class="btn btn-sm btn-outline-info" href="{% url 'post-update' post.id %}">Edit</a>
<a class="btn btn-sm btn-outline-warning" href="{% url 'post-delete' post.id %}">Delete</a>
{% endif%}
<hr>

<form action="{% url 'like-post' post.id %}" method="POST">
	{% csrf_token %}

{% if user.is_authenticated%}

	{% if liked %}
		<button class="btn btn-sm btn-warning" name="post_id" value="{{post.id}}" type="submit">
			Unlike
		</button>- 
	{% else %}
		<button class="btn btn-sm btn-success" name="post_id" value="{{post.id}}" type="submit">
			like
		</button>- 
		{% endif %}
		{%else %}
		<a href="{% url 'login' %}" class="btn btn-sm btn-outline-info">Login</a> to like
	{% endif %}

	<small class="btn btn-outline-primary btn-circle">
			{{total_likes}} likes
	</small>
</form>

<hr>
<a class="btn btn-light btn-sm" href="{% url 'home' %}">back</a>
{% endblock %}
